#include bits.tup 
include bits.tup

LIB_LOCAL = bits.c fnv1a.c
LIB_NAME=bits
# compile library objects
: foreach	$(LIB_LOCAL) |> !cc |> {libs}
# build the library, export the necessary flags
: {libs} |> !lib |>
#
# build the test files
EXE_LOCAL = bits_test.c fnv1a_test.c
: foreach $(EXE_LOCAL) |> !cc |> {exes}
: foreach {exes} |> !exe |> 

# preserve the test files
: test_files/test_lines.txt |> !tup_preserve |> test_files/%b  
: test_files/pg29765.txt |> !tup_preserve |> test_files/%b  
: test_files/almost_a_meelyun_sentences.txt |> !tup_preserve |> test_files/%b  

# preserve the shell script
: run_tests.sh |> !tup_preserve |>
